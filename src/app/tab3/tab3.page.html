<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>
      Statistiky
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="stats-chart"></ion-icon>
        Herní statistiky
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list lines="none">
        <ion-item>
          <ion-icon name="flash" slot="start" color="warning"></ion-icon>
          <ion-label>
            <h3>Aktuální energie</h3>
            <p>{{ formatNumber(gameState.energy || 0) }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="trending-up" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Celková získaná energie</h3>
            <p>{{ formatNumber(gameState.totalEnergy || 0) }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="hand-left" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Celkový počet kliků</h3>
            <p>{{ formatNumber(gameState.totalClicks || 0) }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="pulse"></ion-icon>
        Produkce
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list lines="none">
        <ion-item>
          <ion-icon name="finger-print" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Energie za klik</h3>
            <p>{{ formatNumber(gameState.energyPerClick || 1) }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="time" slot="start" color="secondary"></ion-icon>
          <ion-label>
            <h3>Energie za sekundu</h3>
            <p>{{ formatNumber(gameState.energyPerSecond || 0) }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="calendar" slot="start" color="tertiary"></ion-icon>
          <ion-label>
            <h3>Energie za den</h3>
            <p>{{ formatNumber((gameState.energyPerSecond || 0) * 86400) }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="trending-up"></ion-icon>
        Vylepšení
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list lines="none">
        <ion-item>
          <ion-icon name="layers" slot="start" color="success"></ion-icon>
          <ion-label>
            <h3>Celková úroveň vylepšení</h3>
            <p>{{ getTotalUpgradeLevels() }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="finger-print" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Vylepšení klikání</h3>
            <p>Level {{ getClickUpgradeLevels() }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="time" slot="start" color="secondary"></ion-icon>
          <ion-label>
            <h3>Pasivní vylepšení</h3>
            <p>Level {{ getPassiveUpgradeLevels() }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="settings"></ion-icon>
        Nastavení
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-button 
        expand="block" 
        [color]="resetClickCount === 0 ? 'danger' : 'warning'"
        (click)="resetGame()">
        <ion-icon name="refresh" slot="start"></ion-icon>
        @if (resetClickCount === 0) {
          <span>Resetovat hru</span>
        } @else {
          <span>Klikni znovu pro potvrzení!</span>
        }
      </ion-button>
      
      <ion-text color="medium">
        <p class="reset-warning">
          Klikni dvakrát pro reset hry. Tato akce smaže veškerý progres!
        </p>
      </ion-text>
    </ion-card-content>
  </ion-card>
  
    <ion-card class="nasa-card">
      <ion-card-header>
        <ion-card-title (click)="toggleNasaCard()">
          <ion-icon name="telescope"></ion-icon>
          NASA - Astronomický obrázek dne
          <ion-icon [name]="showNasaCard ? 'chevron-up' : 'chevron-down'" class="expand-icon"></ion-icon>
        </ion-card-title>
      </ion-card-header>
      
      @if (showNasaCard) {
        <ion-card-content>
          @if (loadingNasa) {
            <div class="loading-container">
              <ion-spinner></ion-spinner>
              <p>Načítám data z NASA...</p>
            </div>
          } @else if (nasaData) {
            <h3>{{ nasaData.title }}</h3>
            <p class="nasa-date">{{ nasaData.date }}</p>
            @if (nasaData.url && nasaData.media_type === 'image') {
              <img [src]="nasaData.url" [alt]="nasaData.title" class="nasa-image" />
            }
            <p class="nasa-explanation">{{ nasaData.explanation }}</p>
            <ion-text color="medium">
              <small>Zdroj: NASA APOD API</small>
            </ion-text>
          }
        </ion-card-content>
        }
      </ion-card>
</ion-content>